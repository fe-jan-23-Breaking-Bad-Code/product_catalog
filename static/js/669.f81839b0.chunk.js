/*! For license information please see 669.f81839b0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkproduct_catalog=self.webpackChunkproduct_catalog||[]).push([[669],{1086:function(t,e,n){n.d(e,{D:function(){return So},S:function(){return Y},_:function(){return m},a:function(){return y}});var r=n(1120);function o(){return o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,r.Z)(t)););return t}(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},o.apply(this,arguments)}var i=n(7326),a=n(136),u=n(7277),s=n(8737),c=n(4942),l=n(3433),d=n(5861),f=n(5671),p=n(3144),h=n(9439),v=n(4165),g=function(){return g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},g.apply(this,arguments)};function b(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function w(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))}function m(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function y(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n}var k,x,I,Z,O="undefined"!=typeof localStorage,j=O&&localStorage.getItem("base.content.url")||"https://static.descope.com/pages",S="descope-login-flow",E="code",A="data-exclude-field",C="dls_last_auth",U="data-type",_="poll",P="webauthnCreate",R="submit",T="polling";function q(t){return new URLSearchParams(window.location.search).get(t)}function M(t){if(window.history.replaceState&&q(t)){var e=new URL(window.location.href),n=new URLSearchParams(e.search);n.delete(t),e.search=n.toString(),window.history.replaceState({},"",e.toString())}}function L(t,e){return w(this,void 0,void 0,(0,v.Z)().mark((function n(){var r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(t,{cache:"default"});case 2:if((r=n.sent).ok){n.next=5;break}throw Error("Error fetching URL ".concat(t));case 5:return n.next=7,r[e||"text"]();case 7:return n.t0=n.sent,n.t1=Object.fromEntries(r.headers.entries()),n.abrupt("return",{body:n.t0,headers:n.t1});case 10:case"end":return n.stop()}}),n)})))}(Z=k||(k={})).backward="backward",Z.forward="forward";function D(t,e){var n=new URL(j);return n.pathname=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.join("/").replace(/\/+/g,"/")}(n.pathname,t,"v2-alpha",e),n.toString()}function N(t,e){if(!Number.isNaN(t)&&!Number.isNaN(e))return t>e?k.forward:t<e?k.backward:void 0}var K=function(){var t=(q(S)||"").split("_"),e=(0,h.Z)(t,2),n=e[0],r=void 0===n?"":n,o=e[1];return{executionId:r,stepId:void 0===o?"":o}};function J(){M(S)}var F,W,H,$,B=function(t){return t.replace(/-./g,(function(t){return t[1].toUpperCase()}))},V=function(){var t=K(),e=t.executionId,n=t.stepId;(e||n)&&J();var r=q("t")||void 0;r&&M("t");var o=q(E)||void 0;o&&M(E);var i=q("err")||void 0;return i&&M("err"),{executionId:e,stepId:n,token:r,code:o,exchangeError:i}},z=function(t){var e,n;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e&&(u=o,(a=e).length===u.length&&a.every((function(t,e){return t===u[e]})))||(e=o,n=t.apply(void 0,o)),n;var a,u}},G=null===(I=null===(x=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===x?void 0:x.brands)||void 0===I?void 0:I.find((function(t){var e=t.brand,n=t.version;return"Chromium"===e&&parseFloat(n)}));function Q(t,e){var n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(e);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o+=1){var i=n[o],a=t[i],u=e[i];if(null===a||null===u){if(a!==u)return!1}else if("object"==typeof a&&"object"==typeof u){if(!Q(a,u))return!1}else if(a!==u)return!1}return!0}var Y=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).updateOnlyOnChange,o=void 0===r||r;(0,f.Z)(this,t),F.set(this,void 0),W.set(this,{}),H.set(this,0),$.set(this,!1),this.update=function(t){var n="function"==typeof t?t(m(e,F,"f")):t,r=Object.assign(Object.assign({},m(e,F,"f")),n);if(!m(e,$,"f")||!Q(m(e,F,"f"),r)){var o=m(e,F,"f");y(e,F,r,"f"),Object.freeze(m(e,F,"f")),setTimeout((function(){Object.values(m(e,W,"f")).forEach((function(t){return t(r,o,function(t,e){return function(n){return t[n]!==e[n]}}(r,o))}))}),0)}},y(this,F,n,"f"),y(this,$,o,"f")}return(0,p.Z)(t,[{key:"current",get:function(){return Object.assign({},m(this,F,"f"))}},{key:"subscribe",value:function(t){return y(this,H,m(this,H,"f")+1,"f"),m(this,W,"f")[m(this,H,"f")]=t,m(this,H,"f").toString()}},{key:"unsubscribe",value:function(t){var e=!!m(this,W,"f")[t];return e&&delete m(this,W,"f")[t],e}},{key:"unsubscribeAll",value:function(){return y(this,W,{},"f"),!0}}]),t}();F=new WeakMap,W=new WeakMap,H=new WeakMap,$=new WeakMap;var X=function(t,e){var n;(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.querySelectorAll("[".concat(U,'="').concat(e,'"]')).forEach((function(t){t.textContent=n,t.classList[n?"remove":"add"]("hide")}))})(t,"error-message",null==e?void 0:e.errorText),function(t,e){Object.entries(e||{}).forEach((function(e){var n=(0,h.Z)(e,2),r=n[0],o=n[1];Array.from(t.querySelectorAll('.descope-input[name="'.concat(r,'"]:not([').concat(A,"])"))).forEach((function(t){t.value=o}))}))}(t,null==e?void 0:e.inputs),function(t,e){t.querySelectorAll("[".concat(U,'="totp-link"]')).forEach((function(t){t.href=e}))}(t,null===(n=null==e?void 0:e.totp)||void 0===n?void 0:n.provisionUrl),function(t,e){t.querySelectorAll(".descope-text,.descope-link").forEach((function(t){t.textContent=function(t,e){return t.replace(/{{(.+?)}}/g,(function(t,n){return r=e,n.split(".").reduce((function(t,e){return(null==t?void 0:t[e])||""}),r);var r}))}(t.textContent,e)}))}(t,e)},tt=z((function(){return w(void 0,void 0,void 0,(0,v.Z)().mark((function t(){var e,n,r;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.PublicKeyCredential&&PublicKeyCredential.isConditionalMediationAvailable&&PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable){t.next=2;break}return t.abrupt("return",(console.warn("webauthn","Conditional UI is not supported"),!1));case 2:return t.prev=2,r=Promise.all([null===(e=window.PublicKeyCredential)||void 0===e?void 0:e.isConditionalMediationAvailable(),null===(n=window.PublicKeyCredential)||void 0===n?void 0:n.isUserVerifyingPlatformAuthenticatorAvailable()]).then((function(t){return t.every((function(t){return!!t}))})),108,t.next=6,Promise.race([r,(100,new Promise((function(t,e){setTimeout((function(){e(new Error("Promise timed out after ".concat(100," ms")))}),100)}))).catch((function(){return G()>=108}))]);case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",(console.warn("webauthn","Conditional login check failed",t.t0),!1));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))})),et={"lastAuth.loginId":{"not-empty":function(t){return!!t.loginId},empty:function(t){return!t.loginId}},idpInitiated:{"is-true":function(t){return!!t.code},"is-false":function(t){return!t.code}}};function nt(t){this.message=t}nt.prototype=new Error,nt.prototype.name="InvalidCharacterError";var rt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new nt("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=e.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return a};function ot(t){this.message=t}ot.prototype=new Error,ot.prototype.name="InvalidTokenError";var it,at="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},ut="__lodash_hash_undefined__",st=1/0,ct="[object Function]",lt="[object GeneratorFunction]",dt="[object Symbol]",ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,ht=/^\./,vt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gt=/\\(\\)?/g,bt=/^\[object .+?Constructor\]$/,wt="object"==typeof at&&at&&at.Object===Object&&at,mt="object"==typeof self&&self&&self.Object===Object&&self,yt=wt||mt||Function("return this")(),kt=Array.prototype,xt=Function.prototype,It=Object.prototype,Zt=yt["__core-js_shared__"],Ot=(it=/[^.]+$/.exec(Zt&&Zt.keys&&Zt.keys.IE_PROTO||""))?"Symbol(src)_1."+it:"",jt=xt.toString,St=It.hasOwnProperty,Et=It.toString,At=RegExp("^"+jt.call(St).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ct=yt.Symbol,Ut=kt.splice,_t=Kt(yt,"Map"),Pt=Kt(Object,"create"),Rt=Ct?Ct.prototype:void 0,Tt=Rt?Rt.toString:void 0;function qt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Mt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dt(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function Nt(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Kt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){if(!$t(t)||Ot&&Ot in t)return!1;var e=function(t){var e=$t(t)?Et.call(t):"";return e==ct||e==lt}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?At:bt;return e.test(function(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(n)?n:void 0}qt.prototype.clear=function(){this.__data__=Pt?Pt(null):{}},qt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},qt.prototype.get=function(t){var e=this.__data__;if(Pt){var n=e[t];return n===ut?void 0:n}return St.call(e,t)?e[t]:void 0},qt.prototype.has=function(t){var e=this.__data__;return Pt?void 0!==e[t]:St.call(e,t)},qt.prototype.set=function(t,e){return this.__data__[t]=Pt&&void 0===e?ut:e,this},Mt.prototype.clear=function(){this.__data__=[]},Mt.prototype.delete=function(t){var e=this.__data__,n=Dt(e,t);return!(n<0)&&(n==e.length-1?e.pop():Ut.call(e,n,1),!0)},Mt.prototype.get=function(t){var e=this.__data__,n=Dt(e,t);return n<0?void 0:e[n][1]},Mt.prototype.has=function(t){return Dt(this.__data__,t)>-1},Mt.prototype.set=function(t,e){var n=this.__data__,r=Dt(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Lt.prototype.clear=function(){this.__data__={hash:new qt,map:new(_t||Mt),string:new qt}},Lt.prototype.delete=function(t){return Nt(this,t).delete(t)},Lt.prototype.get=function(t){return Nt(this,t).get(t)},Lt.prototype.has=function(t){return Nt(this,t).has(t)},Lt.prototype.set=function(t,e){return Nt(this,t).set(t,e),this};var Jt=Wt((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(Bt(t))return Tt?Tt.call(t):"";var e=t+"";return"0"==e&&1/t==-st?"-0":e}(e);var n=[];return ht.test(t)&&n.push(""),t.replace(vt,(function(t,e,r,o){n.push(r?o.replace(gt,"$1"):e||t)})),n}));function Ft(t){if("string"==typeof t||Bt(t))return t;var e=t+"";return"0"==e&&1/t==-st?"-0":e}function Wt(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a),a};return n.cache=new(Wt.Cache||Lt),n}Wt.Cache=Lt;var Ht=Array.isArray;function $t(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Bt(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&Et.call(t)==dt}var Vt,zt=function(t,e,n){var r=null==t?void 0:function(t,e){var n;e=function(t,e){if(Ht(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Bt(t))||pt.test(t)||!ft.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:Ht(n=e)?n:Jt(n);for(var r=0,o=e.length;null!=t&&r<o;)t=t[Ft(e[r++])];return r&&r==o?t:void 0}(t,e);return void 0===r?n:r},Gt="/v1/auth/otp/update/email",Qt="/v1/auth/otp/update/phone",Yt="/v1/auth/magiclink/update/email",Xt="/v1/auth/magiclink/update/phone",te="/v1/auth/enchantedlink/update/email",ee="/v1/auth/webauthn/signup/start",ne="/v1/auth/webauthn/signup/finish",re="/v1/auth/webauthn/signin/start",oe="/v1/auth/webauthn/signin/finish",ie="/v1/auth/webauthn/signup-in/start",ae="v1/auth/webauthn/update/start",ue="/v1/auth/webauthn/update/finish",se=6e5,ce=function(){var t={};return{headers:function(e){var n="function"==typeof e.entries?Object.fromEntries(e.entries()):e;return t.Headers=JSON.stringify(n),this},body:function(e){return t.Body=e,this},url:function(e){return t.Url=e.toString(),this},method:function(e){return t.Method=e,this},title:function(e){return t.Title=e,this},status:function(e){return t.Status=e,this},build:function(){return Object.keys(t).flatMap((function(e){return t[e]?["".concat("Title"!==e?"".concat(e,": "):"").concat(t[e])]:[]})).join("\n")}}};!function(t){t.get="GET",t.delete="DELETE",t.post="POST",t.put="PUT"}(Vt||(Vt={}));var le=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Headers(e.reduce((function(t,e){var n=function(t){return Array.isArray(t)?t:t instanceof Headers?Array.from(t.entries()):t?Object.entries(t):[]}(e);return n.reduce((function(e,n){var r=(0,h.Z)(n,2),o=r[0],i=r[1];return t[o]=i,t}),t),t}),{}))},de=function(t){return void 0===t?void 0:JSON.stringify(t)},fe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t;return e&&(n=n+":"+e),{Authorization:"Bearer ".concat(n)}},pe={TOO_MANY_REQUESTS:429};function he(t,e,n){var r,o=ve(t);e&&(o=null===(r=null==o?void 0:o.tenants)||void 0===r?void 0:r[e]);var i=null==o?void 0:o[n];return Array.isArray(i)?i:[]}function ve(t){if("string"!=typeof t||!t)throw new Error("Invalid token provided");return function(t,e){if("string"!=typeof t)throw new ot("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(rt(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return rt(e)}}(t.split(".")[n]))}catch(t){throw new ot("Invalid token specified: "+t.message)}}(t)}function ge(t){var e=ve(t).exp;return(new Date).getTime()/1e3>e}function be(t,e){return he(t,e,"permissions")}function we(t,e){return he(t,e,"roles")}var me=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.join("/").replace(/\/{2,}/g,"/")};function ye(t,e){return ke.apply(this,arguments)}function ke(){return ke=(0,d.Z)((0,v.Z)().mark((function t(e,n){var r,o,i,a;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return o=t.sent,i={code:o.status,ok:o.ok,response:o},t.next=6,o.clone().json();case 6:return a=t.sent,t.abrupt("return",(o.ok?i.data=n?n(a):a:(i.error=a,o.status===pe.TOO_MANY_REQUESTS&&Object.assign(i.error,{retryAfter:Number.parseInt(null===(r=o.headers)||void 0===r?void 0:r.get("retry-after"))||0})),i));case 8:case"end":return t.stop()}}),t)}))),ke.apply(this,arguments)}var xe,Ie,Ze,Oe,je=function(t,e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return function(e){return!t(e)&&n.replace("{val}",e)}}},Se=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{validate:function(t){return e.forEach((function(e){var n=e(t);if(n)throw new Error(n)})),!0}}},Ee=function(t){return function(e){return t.test(e)}},Ae=Ee(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),Ce=Ee(/^\+[1-9]{1}[0-9]{3,14}$/),Ue=je(Ae,'"{val}" is not a valid email'),_e=je(Ce,'"{val}" is not a valid phone number'),Pe=je((function(t){return t.length>=1}),"Minimum length is 1"),Re=je((function(t){return"string"==typeof t}),"Input is not a string"),Te=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.forEach((function(t,e){return Se.apply(void 0,(0,l.Z)(t)).validate(r[e])})),t.apply(void 0,r)}}},qe=function(t){return[Re('"'.concat(t,'" must be a string')),Pe('"'.concat(t,'" must not be empty'))]},Me=function(t){return[Re('"'.concat(t,'" must be a string')),Ue()]},Le=function(t){return[Re('"'.concat(t,'" must be a string')),_e()]},De=Te(qe("accessKey")),Ne=function(t){return{exchange:De((function(e){return ye(t.post("/v1/auth/accesskey/exchange",{},{token:e}))}))}};!function(t){t.sms="sms",t.whatsapp="whatsapp"}(xe||(xe={})),function(t){t.email="email",t.sms="sms",t.whatsapp="whatsapp"}(Ie||(Ie={})),function(t){t.waiting="waiting",t.running="running",t.completed="completed",t.failed="failed"}(Ze||(Ze={})),function(t){t.signUp="signup",t.signIn="signin",t.verify="verify"}(Oe||(Oe={}));var Ke,Je=qe("loginId"),Fe=Te(qe("token")),We=Te(Je),He=Te(qe("pendingRef")),$e=Te(Je,Me("email")),Be=function(t){return{verify:Fe((function(e){return ye(t.post("/v1/auth/enchantedlink/verify",{token:e}))})),signIn:We((function(e,n,r,o){return ye(t.post(me("/v1/auth/enchantedlink/signin",Ie.email),{loginId:e,URI:n,loginOptions:r},{token:o}))})),signUpOrIn:We((function(e,n){return ye(t.post(me("/v1/auth/enchantedlink/signup-in",Ie.email),{loginId:e,URI:n}))})),signUp:We((function(e,n,r){return ye(t.post(me("/v1/auth/enchantedlink/signup",Ie.email),{loginId:e,URI:n,user:r}))})),waitForSession:He((function(e,n){return new Promise((function(r){var o,i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pollingIntervalMs,n=void 0===e?1e3:e,r=t.timeoutMs,o=void 0===r?6e5:r;return{pollingIntervalMs:Math.max(n||1e3,1e3),timeoutMs:Math.min(o||se,se)}}(n),a=i.pollingIntervalMs,u=i.timeoutMs,s=setInterval((0,d.Z)((0,v.Z)().mark((function n(){var i;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.post("/v1/auth/enchantedlink/pending-session",{pendingRef:e});case 2:(i=n.sent).ok&&(clearInterval(s),o&&clearTimeout(o),r(ye(Promise.resolve(i))));case 4:case"end":return n.stop()}}),n)}))),a);o=setTimeout((function(){r({error:{errorDescription:"Session polling timeout exceeded: ".concat(u,"ms"),errorCode:"0"},ok:!1}),clearInterval(s)}),u)}))})),update:{email:$e((function(e,n,r,o){return ye(t.post(te,{loginId:e,email:n,URI:r},{token:o}))}))}}},Ve=Te(qe("flowId")),ze=Te(qe("executionId"),qe("stepId"),qe("interactionId")),Ge=function(t){return{start:Ve((function(e,n,r,o,i){return ye(t.post("/v1/flow/start",{flowId:e,options:n,conditionInteractionId:r,interactionId:o,input:i}))})),next:ze((function(e,n,r,o){return ye(t.post("/v1/flow/next",{executionId:e,stepId:n,interactionId:r,input:o}))}))}},Qe=qe("loginId"),Ye=Te(qe("token")),Xe=Te(Qe),tn=Te(Qe,Le("phone")),en=Te(Qe,Me("email")),nn=function(t){return{verify:Ye((function(e){return ye(t.post("/v1/auth/magiclink/verify",{token:e}))})),signIn:Object.keys(Ie).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,Xe((function(e,r,o,i){return ye(t.post(me("/v1/auth/magiclink/signin",n),{loginId:e,URI:r,loginOptions:o},{token:i}))}))))}),{}),signUp:Object.keys(Ie).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,Xe((function(e,r,o){return ye(t.post(me("/v1/auth/magiclink/signup",n),{loginId:e,URI:r,user:o}))}))))}),{}),signUpOrIn:Object.keys(Ie).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,Xe((function(e,r){return ye(t.post(me("/v1/auth/magiclink/signup-in",n),{loginId:e,URI:r}))}))))}),{}),update:{email:en((function(e,n,r,o){return ye(t.post(Yt,{loginId:e,email:n,URI:r},{token:o}))})),phone:Object.keys(xe).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,tn((function(e,r,o,i){return ye(t.post(me(Xt,n),{loginId:e,phone:r,URI:o},{token:i}))}))))}),{})}}};!function(t){t.facebook="facebook",t.github="github",t.google="google",t.microsoft="microsoft",t.gitlab="gitlab",t.apple="apple",t.discord="discord",t.linkedin="linkedin"}(Ke||(Ke={}));var rn,on=Te(qe("code")),an=function(t){return{start:Object.keys(Ke).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,function(){var e=(0,d.Z)((0,v.Z)().mark((function e(r){var o,i,a,u,s,c,l,d=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(d.length>1&&void 0!==d[1]?d[1]:{}).redirect,i=void 0!==o&&o,a=d.length>2?d[2]:void 0,u=d.length>3?d[3]:void 0,e.next=5,t.post("/v1/auth/oauth/authorize",a||{},{queryParams:Object.assign({provider:n},r&&{redirectURL:r}),token:u});case 5:if(s=e.sent,i&&s.ok){e.next=8;break}return e.abrupt("return",ye(Promise.resolve(s)));case 8:return e.next=10,s.json();case 10:c=e.sent,l=c.url,window.location.href=l;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),{}),exchange:on((function(e){return ye(t.post("/v1/auth/oauth/exchange",{code:e}))}))}};!function(t){t.signUp="signup",t.signIn="signin",t.verify="verify",t.updatePhone="updatePhone"}(rn||(rn={}));var un,sn=qe("loginId"),cn=Te(sn,qe("code")),ln=Te(sn),dn=Te(sn,Le("phone")),fn=Te(sn,Me("email")),pn=function(t){return{verify:Object.keys(Ie).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,cn((function(e,r){return ye(t.post(me("/v1/auth/otp/verify",n),{code:r,loginId:e}))}))))}),{}),signIn:Object.keys(Ie).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,ln((function(e,r,o){return ye(t.post(me("/v1/auth/otp/signin",n),{loginId:e,loginOptions:r},{token:o}))}))))}),{}),signUp:Object.keys(Ie).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,ln((function(e,r){return ye(t.post(me("/v1/auth/otp/signup",n),{loginId:e,user:r}))}))))}),{}),signUpOrIn:Object.keys(Ie).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,ln((function(e){return ye(t.post(me("/v1/auth/otp/signup-in",n),{loginId:e}))}))))}),{}),update:{email:fn((function(e,n,r){return ye(t.post(Gt,{loginId:e,email:n},{token:r}))})),phone:Object.keys(xe).reduce((function(e,n){return Object.assign(Object.assign({},e),(0,c.Z)({},n,dn((function(e,r,o){return ye(t.post(me(Qt,n),{loginId:e,phone:r},{token:o}))}))))}),{})}}},hn=Te(qe("tenant")),vn=Te(qe("code")),gn=function(t){return{start:hn(function(){var e=(0,d.Z)((0,v.Z)().mark((function e(n,r){var o,i,a,u,s,c,l,d=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(d.length>2&&void 0!==d[2]?d[2]:{}).redirect,i=void 0!==o&&o,a=d.length>3?d[3]:void 0,u=d.length>4?d[4]:void 0,e.next=5,t.post("/v1/auth/saml/authorize",a||{},{queryParams:{tenant:n,redirectURL:r},token:u});case 5:if(s=e.sent,i&&s.ok){e.next=8;break}return e.abrupt("return",ye(Promise.resolve(s)));case 8:return e.next=10,s.json();case 10:c=e.sent,l=c.url,window.location.href=l;case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),exchange:vn((function(e){return ye(t.post("/v1/auth/saml/exchange",{code:e}))}))}},bn=qe("loginId"),wn=Te(bn,qe("code")),mn=Te(bn),yn=Te(bn),kn=function(t){return{signUp:mn((function(e,n){return ye(t.post("/v1/auth/totp/signup",{loginId:e,user:n}))})),verify:wn((function(e,n,r,o){return ye(t.post("/v1/auth/totp/verify",{loginId:e,code:n,loginOptions:r},{token:o}))})),update:yn((function(e,n){return ye(t.post("/v1/auth/totp/update",{loginId:e},{token:n}))}))}},xn=qe("loginId"),In=qe("newPassword"),Zn=Te(xn,qe("password")),On=Te(xn),jn=Te(xn,In),Sn=Te(xn,qe("oldPassword"),In),En=function(t){return{signUp:Zn((function(e,n,r){return ye(t.post("/v1/auth/password/signup",{loginId:e,password:n,user:r}))})),signIn:Zn((function(e,n){return ye(t.post("/v1/auth/password/signin",{loginId:e,password:n}))})),sendReset:On((function(e,n){return ye(t.post("/v1/auth/password/reset",{loginId:e,redirectUrl:n}))})),update:jn((function(e,n,r){return ye(t.post("/v1/auth/password/update",{loginId:e,newPassword:n},{token:r}))})),replace:Sn((function(e,n,r){return ye(t.post("/v1/auth/password/replace",{loginId:e,oldPassword:n,newPassword:r}))})),policy:function(){return ye(t.get("/v1/auth/password/policy"))}}},An=[Re('"loginId" must be a string')],Cn=qe("loginId"),Un=qe("origin"),_n=Te(Cn,Un,qe("name")),Pn=Te(Cn,Un),Rn=Te(An,Un),Tn=Te(Cn,Un,qe("token")),qn=Te(qe("transactionId"),qe("response")),Mn=function(t){return{signUp:{start:_n((function(e,n,r){return ye(t.post(ee,{user:{loginId:e,name:r},origin:n}))})),finish:qn((function(e,n){return ye(t.post(ne,{transactionId:e,response:n}))}))},signIn:{start:Rn((function(e,n,r,o){return ye(t.post(re,{loginId:e,origin:n,loginOptions:r},{token:o}))})),finish:qn((function(e,n){return ye(t.post(oe,{transactionId:e,response:n}))}))},signUpOrIn:{start:Pn((function(e,n){return ye(t.post(ie,{loginId:e,origin:n}))}))},update:{start:Tn((function(e,n,r){return ye(t.post(ae,{loginId:e,origin:n},{token:r}))})),finish:qn((function(e,n){return ye(t.post(ue,{transactionId:e,response:n}))}))}}},Ln=Te(qe("token")),Dn=Te([(un=qe("projectId"),je(function(t,e){return function(t){return Se.apply(void 0,(0,l.Z)(e)).validate(zt(t,"projectId"))}}(0,un))())])((function(t){var e,n,r=[].concat((null===(e=t.hooks)||void 0===e?void 0:e.beforeRequest)||[]),o=[].concat((null===(n=t.hooks)||void 0===n?void 0:n.afterRequest)||[]);return function(t){var e,n=t.projectId,r=t.logger,o=t.baseUrl,i=t.hooks,a=t.cookiePolicy,u=t.baseHeaders,s=void 0===u?{}:u,c=t.fetch;return e=function(t){var e=t.baseUrl,n=t.projectId,r=t.baseConfig,o=t.logger,i=t.hooks,a=t.cookiePolicy,u=function(t,e){var n=e||fetch;return n||null==t||t.warn("Fetch is not defined, you will not be able to send http requests, if you are running in a test, make sure fetch is defined globally"),t?(0,d.Z)((0,v.Z)().mark((function e(){var r,o,i,a,u=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}throw Error("Cannot send http request, fetch is not defined, if you are running in a test, make sure fetch is defined globally");case 2:for(r=u.length,o=new Array(r),i=0;i<r;i++)o[i]=u[i];return t.log(function(t){return ce().title("Request").url(t[0]).method(t[1].method).headers(t[1].headers).body(t[1].body).build()}(o)),e.next=6,n.apply(void 0,o);case 6:return a=e.sent,e.t0=t,e.t1=a.ok?"log":"error",e.next=11,function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e){var n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.clone?e.clone().text():e.text();case 2:return n=t.sent,t.abrupt("return",(e.text=function(){return Promise.resolve(n)},e.json=function(){return Promise.resolve(JSON.parse(n))},ce().title("Response").url(e.url.toString()).status("".concat(e.status," ").concat(e.statusText)).headers(e.headers).body(n).build()));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(a);case 11:return e.t2=e.sent,e.t0[e.t1].call(e.t0,e.t2),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))):n}(o,t.fetch),s=function(){var t=(0,d.Z)((0,v.Z)().mark((function t(o){var s,c,l,d,f,p,h,g;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=(null==i?void 0:i.beforeRequest)?i.beforeRequest(o):o,c=s.path,l=s.body,d=s.headers,f=s.queryParams,p=s.method,h=s.token,t.next=9,u(function(t){var e=t.queryParams,n=new URL(t.path,t.baseUrl);return e&&(n.search=new URLSearchParams(e).toString()),n}({path:c,baseUrl:e,queryParams:f}),{headers:le(fe(n,h),{"x-descope-sdk-name":"core-js","x-descope-sdk-version":"1.0.9"},(null==r?void 0:r.baseHeaders)||{},d),method:p,body:de(l),credentials:a||"include"});case 9:if(g=t.sent,t.t0=null==i?void 0:i.afterRequest,!t.t0){t.next=14;break}return t.next=14,i.afterRequest(o,null==g?void 0:g.clone());case 14:return t.abrupt("return",g);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers,r=e.queryParams,o=e.token;return s({path:t,headers:n,queryParams:r,body:void 0,method:Vt.get,token:o})},post:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.headers,o=n.queryParams,i=n.token;return s({path:t,headers:r,queryParams:o,body:e,method:Vt.post,token:i})},put:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.headers,o=n.queryParams,i=n.token;return s({path:t,headers:r,queryParams:o,body:e,method:Vt.put,token:i})},delete:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.headers,o=n.queryParams,i=n.token;return s({path:t,headers:r,queryParams:o,body:e,method:Vt.delete,token:i})},hooks:i}}({baseUrl:o||"https://api.descope.com",projectId:n,logger:r,hooks:i,cookiePolicy:a,baseConfig:{baseHeaders:s},fetch:c}),{accessKey:Ne(e),otp:pn(e),magicLink:nn(e),enchantedLink:Be(e),oauth:an(e),saml:gn(e),totp:kn(e),webauthn:Mn(e),password:En(e),flow:Ge(e),refresh:function(t){return ye(e.post("/v1/auth/refresh",{},{token:t}))},logout:function(t){return ye(e.post("/v1/auth/logout",{},{token:t}))},logoutAll:function(t){return ye(e.post("/v1/auth/logoutall",{},{token:t}))},me:function(t){return ye(e.get("/v1/auth/me",{token:t}))},isJwtExpired:Ln(ge),getJwtPermissions:Ln(be),getJwtRoles:Ln(we),httpClient:e}}(Object.assign(Object.assign({},t),{hooks:{beforeRequest:function(t){return null==r?void 0:r.reduce((function(t,e){return e(t)}),t)},afterRequest:function(){var e=(0,d.Z)((0,v.Z)().mark((function e(n,r){return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(null==o?void 0:o.map((function(t){return t(n,null==r?void 0:r.clone())})));case 2:e.sent.forEach((function(e){var n;return"rejected"===e.status&&(null===(n=t.logger)||void 0===n?void 0:n.error(e.reason))}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}))})),Nn=function(t,e,n){return e.forEach((function(e){for(var r=e.split("."),o=r.shift(),i=t;r.length>0;){if(i=i[o],!o||!i)throw Error('Invalid path "'.concat(e,'", "').concat(o,'" is missing or has no value'));o=r.shift()}if("function"!=typeof i[o])throw Error('"'.concat(e,'" is not a function'));var a=i[o];i[o]=n(a)})),t},Kn=Object.assign(Dn,{DeliveryMethods:Ie}),Jn="Blocked by CSP",Fn="9319";var Wn="Failed to load the JS script of the agent";function Hn(t){var e;t.scriptUrlPattern;var n=t.token,r=t.apiKey,o=void 0===r?n:r,i=b(t,["scriptUrlPattern","token","apiKey"]),a=null!==(e=function(t,e){return function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(t,e)?t[e]:void 0}(t,"scriptUrlPattern"))&&void 0!==e?e:"https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js";return Promise.resolve().then((function(){if(!o||"string"!=typeof o)throw new Error("API key required");var t=function(t,e){return(Array.isArray(t)?t:[t]).map((function(t){return function(t,e){var n=encodeURIComponent;return t.replace(/<[^<>]+>/g,(function(t){return"<version>"===t?"3":"<apiKey>"===t?n(e):"<loaderVersion>"===t?n("3.8.2"):t}))}(String(t),e)}))}(a,o);return function(t,e){var n=[];return function(t,e){var n,r,o=(r=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],t,!0),{current:function(){return r[0]},postpone:function(){var t=r.shift();void 0!==t&&r.push(t)},exclude:function(){r.shift()}}),i=(n=0,function(){return Math.random()*Math.min(3e3,100*Math.pow(2,n++))}),a=o.current();return void 0===a?Promise.reject(new TypeError("The list of script URL patterns is empty")):function t(n,r){return e(n).catch((function(e){if(r+1>=5)throw e;!function(t){if(!(t instanceof Error))return!1;var e=t.message;return e===Jn||e===Fn}(e)?o.postpone():o.exclude();var n,a=o.current();if(void 0===a)throw e;return(n=i(),new Promise((function(t){return setTimeout(t,n)}))).then((function(){return t(a,r+1)}))}))}(a,0)}(t,(function(t){var r=new Date,o=function(){return n.push({url:t,startedAt:r,finishedAt:new Date})},i=e(t);return i.then(o,o),i})).then((function(t){return[t,{attempts:n}]}))}(t,$n).catch(Vn)})).then((function(t){var e=t[0],n=t[1];return e.load(g(g({},i),{ldi:n}))}))}function $n(t){return function(t,e,n,r){var o,i=document,a="securitypolicyviolation",u=function(e){var n=new URL(t,location.href),r=e.blockedURI;r!==n.href&&r!==n.protocol.slice(0,-1)&&r!==n.origin||(o=e,s())};i.addEventListener(a,u);var s=function(){return i.removeEventListener(a,u)};return Promise.resolve().then(e).then((function(t){return s(),t}),(function(t){return new Promise((function(t){return setTimeout(t)})).then((function(){if(s(),o)return function(){throw new Error(Jn)}();throw t}))}))}(t,(function(){return function(t){return new Promise((function(e,n){var r=document.createElement("script"),o=function(){var t;return null===(t=r.parentNode)||void 0===t?void 0:t.removeChild(r)},i=document.head||document.getElementsByTagName("head")[0];r.onload=function(){o(),e()},r.onerror=function(){o(),n(new Error(Wn))},r.async=!0,r.src=t,i.appendChild(r)}))}(t)})).then(Bn)}function Bn(){var t=window,e="__fpjs_p_l_b",n=t[e];if(function(t,e){var n,r=null===(n=Object.getOwnPropertyDescriptor)||void 0===n?void 0:n.call(Object,t,e);(null==r?void 0:r.configurable)?delete t[e]:r&&!r.writable||(t[e]=void 0)}(t,e),"function"!=typeof(null==n?void 0:n.load))throw new Error(Fn);return n}function Vn(t){throw t instanceof Error&&t.message===Fn?new Error(Wn):t}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Gn=function t(e,n){function r(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=zn({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+i}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),a=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(r[u]=e.read(a,u),t===u)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",zn({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,zn({},this.attributes,e))},withConverter:function(e){return t(zn({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),Qn=function(t,e){var n;return["beforeRequest","afterRequest"].reduce((function(n,r){var o;return n[r]=[].concat((null===(o=t.hooks)||void 0===o?void 0:o[r])||[]).concat((null==e?void 0:e[r])||[]),n}),null!==(n=t.hooks)&&void 0!==n?n:t.hooks={}),t},Yn=function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e){var n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e?void 0:e.ok){t.next=2;break}return t.abrupt("return",{});case 2:return t.next=4,null==e?void 0:e.clone().json();case 4:return n=t.sent,t.abrupt("return",(null==n?void 0:n.authInfo)||n||{});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xn=function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e){var n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yn(e);case 2:return n=t.sent,t.abrupt("return",(null==n?void 0:n.user)||((null==n?void 0:n.hasOwnProperty("userId"))?n:void 0));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tr="undefined"!=typeof localStorage,er=function(t,e){return tr&&(null===localStorage||void 0===localStorage?void 0:localStorage.setItem(t,e))},nr=function(t){return tr&&(null===localStorage||void 0===localStorage?void 0:localStorage.getItem(t))},rr=function(t){return tr&&(null===localStorage||void 0===localStorage?void 0:localStorage.removeItem(t))},or="undefined"!=typeof window,ir=or&&(null===localStorage||void 0===localStorage?void 0:localStorage.getItem("fingerprint.endpoint.url"))||"https://fp.descope.com",ar=function(){return{vsid:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",vrid:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}},ur=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=localStorage.getItem("fp");if(!e)return null;var n=JSON.parse(e);return(new Date).getTime()>n.expiry&&!t?null:n.value},sr=function(t){return t.body&&(t.body.fpData=ur(!0)||ar()),t},cr="dls_last_user_login_id",lr="dls_last_user_display_name",dr=function(){return nr(cr)},fr=function(){return nr(lr)},pr=function(t){return(0,d.Z)((0,v.Z)().mark((function e(){var n,r,o,i,a,u,s,c,l=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r),i=0;i<r;i++)o[i]=l[i];return o[1]=o[1]||{},a=o[1],u=void 0===a?{}:a,s=dr(),c=fr(),s&&(null!==(n=u.lastAuth)&&void 0!==n||(u.lastAuth={}),u.lastAuth.loginId=s,u.lastAuth.name=c),e.next=6,t.apply(void 0,o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))},hr=function(t){return(0,d.Z)((0,v.Z)().mark((function e(){var n,r=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(void 0,r);case 2:return n=e.sent,e.abrupt("return",(rr(cr),rr(lr),n));case 4:case"end":return e.stop()}}),e)})))};function vr(){var t=[];return{pub:function(e){t.forEach((function(t){return t(e)}))},sub:function(e){var n=t.push(e)-1;return function(){return t.splice(n,1)}}}}var gr="DS",br="DSR",wr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=t.refreshJwt,r=t.sessionJwt,o=b(t,["refreshJwt","sessionJwt"]);void 0===e&&(e=!1),n&&er(br,n),r&&(e?function(t,e,n){var r=n.cookiePath,o=n.cookieDomain,i=n.cookieExpiration;if(e){var a=new Date(1e3*i);Gn.set(t,e,{path:r,domain:o,expires:a,sameSite:"Strict",secure:!0})}}(gr,r,o):er(gr,r))};function mr(){return nr(br)||""}function yr(){return Gn.get(gr)||nr(gr)||""}function kr(){rr(br),rr(gr),Gn.remove(gr)}var xr=function(t){return Object.assign(t,{token:t.token||mr()})},Ir=function(t){return(0,d.Z)((0,v.Z)().mark((function e(){var n,r=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(void 0,r);case 2:return n=e.sent,e.abrupt("return",(kr(),n));case 4:case"end":return e.stop()}}),e)})))};function Zr(t){return Or.apply(this,arguments)}function Or(){return Or=(0,d.Z)((0,v.Z)().mark((function t(e){var n,r;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(t){var e,n=JSON.parse(t);return n.publicKey.challenge=Rr(n.publicKey.challenge),n.publicKey.user.id=Rr(n.publicKey.user.id),null===(e=n.publicKey.excludeCredentials)||void 0===e||e.forEach((function(t){t.id=Rr(t.id)})),n}(e),t.next=3,navigator.credentials.create(n);case 3:return r=t.sent,t.abrupt("return",JSON.stringify({id:r.id,rawId:Tr(r.rawId),type:r.type,response:{attestationObject:Tr(r.response.attestationObject),clientDataJSON:Tr(r.response.clientDataJSON)}}));case 5:case"end":return t.stop()}}),t)}))),Or.apply(this,arguments)}function jr(t){return Sr.apply(this,arguments)}function Sr(){return Sr=(0,d.Z)((0,v.Z)().mark((function t(e){var n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=_r(e),t.t0=Pr,t.next=4,navigator.credentials.get(n);case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 6:case"end":return t.stop()}}),t)}))),Sr.apply(this,arguments)}function Er(t,e){return Ar.apply(this,arguments)}function Ar(){return Ar=(0,d.Z)((0,v.Z)().mark((function t(e,n){var r;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=_r(e)).signal=n.signal,r.mediation="conditional",t.t0=Pr,t.next=6,navigator.credentials.get(r);case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)}))),Ar.apply(this,arguments)}function Cr(){return Ur.apply(this,arguments)}function Ur(){return Ur=(0,d.Z)((0,v.Z)().mark((function t(){var e,n,r=arguments;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]&&r[0],or){t.next=3;break}return t.abrupt("return",Promise.resolve(!1));case 3:return n=!!(PublicKeyCredential&&navigator.credentials&&navigator.credentials.create&&navigator.credentials.get),t.abrupt("return",n&&e&&PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable?PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable():n);case 5:case"end":return t.stop()}}),t)}))),Ur.apply(this,arguments)}function _r(t){var e,n=JSON.parse(t);return n.publicKey.challenge=Rr(n.publicKey.challenge),null===(e=n.publicKey.allowCredentials)||void 0===e||e.forEach((function(t){t.id=Rr(t.id)})),n}function Pr(t){return JSON.stringify({id:t.id,rawId:Tr(t.rawId),type:t.type,response:{authenticatorData:Tr(t.response.authenticatorData),clientDataJSON:Tr(t.response.clientDataJSON),signature:Tr(t.response.signature),userHandle:t.response.userHandle?Tr(t.response.userHandle):void 0}})}function Rr(t){var e=t.replace(/_/g,"/").replace(/-/g,"+");return Uint8Array.from(atob(e),(function(t){return t.charCodeAt(0)})).buffer}function Tr(t){return btoa(String.fromCharCode.apply(null,new Uint8Array(t))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}var qr,Mr,Lr,Dr,Nr,Kr,Jr,Fr,Wr,Hr,$r,Br,Vr,zr,Gr,Qr,Yr,Xr,to,eo,no,ro,oo,io,ao,uo,so,co,lo,fo,po,ho,vo,go,bo,wo,mo,yo,ko,xo=(qr=function(t){return{signUp:function(e,n){return(0,d.Z)((0,v.Z)().mark((function r(){var o,i;return(0,v.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.webauthn.signUp.start(e,window.location.origin,n);case 2:if((o=r.sent).ok){r.next=5;break}return r.abrupt("return",o);case 5:return r.next=7,Zr(o.data.options);case 7:return i=r.sent,r.next=10,t.webauthn.signUp.finish(o.data.transactionId,i);case 10:return r.abrupt("return",r.sent);case 11:case"end":return r.stop()}}),r)})))()},signIn:function(e){return(0,d.Z)((0,v.Z)().mark((function n(){var r,o;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.webauthn.signIn.start(e,window.location.origin);case 2:if((r=n.sent).ok){n.next=5;break}return n.abrupt("return",r);case 5:return n.next=7,jr(r.data.options);case 7:return o=n.sent,n.next=10,t.webauthn.signIn.finish(r.data.transactionId,o);case 10:return n.abrupt("return",n.sent);case 11:case"end":return n.stop()}}),n)})))()},signUpOrIn:function(e){return(0,d.Z)((0,v.Z)().mark((function n(){var r,o,i,a;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.webauthn.signUpOrIn.start(e,window.location.origin);case 2:if((o=n.sent).ok){n.next=5;break}return n.abrupt("return",o);case 5:if(!(null===(r=o.data)||void 0===r?void 0:r.create)){n.next=12;break}return n.next=8,Zr(o.data.options);case 8:return i=n.sent,n.next=11,t.webauthn.signUp.finish(o.data.transactionId,i);case 11:case 17:return n.abrupt("return",n.sent);case 12:return n.next=14,jr(o.data.options);case 14:return a=n.sent,n.next=17,t.webauthn.signIn.finish(o.data.transactionId,a);case 18:case"end":return n.stop()}}),n)})))()},update:function(e,n){return(0,d.Z)((0,v.Z)().mark((function r(){var o,i;return(0,v.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.webauthn.update.start(e,window.location.origin,n);case 2:if((o=r.sent).ok){r.next=5;break}return r.abrupt("return",o);case 5:return r.next=7,Zr(o.data.options);case 7:return i=r.sent,r.next=10,t.webauthn.update.finish(o.data.transactionId,i);case 10:return r.abrupt("return",r.sent);case 11:case"end":return r.stop()}}),r)})))()},helpers:{create:Zr,get:jr,isSupported:Cr,conditional:Er}}},function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=qr.apply(void 0,e);return Object.assign(r.signUp,e[0].webauthn.signUp),Object.assign(r.signIn,e[0].webauthn.signIn),Object.assign(r.signUpOrIn,e[0].webauthn.signUpOrIn),Object.assign(r.update,e[0].webauthn.update),r}),Io=function(t){return Object.assign(Object.assign({},t.flow),{start:function(){var e=(0,d.Z)((0,v.Z)().mark((function e(){var n,r,o,i,a,u,s=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=s.length,o=new Array(r),i=0;i<r;i++)o[i]=s[i];return e.next=3,Cr();case 3:return a=e.sent,u=Object.assign(Object.assign({redirectUrl:window.location.href},o[1]),{deviceInfo:{webAuthnSupport:a}}),e.abrupt("return",(o[1]=u,(n=t.flow).start.apply(n,o)));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})},Zo=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}}((function(t){return function(e){var r=e.fpKey,o=e.fpLoad,i=b(e,["fpKey","fpLoad"]);return r?(or?o&&function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e){var r,o,i,a,u;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!ur()){t.next=3;break}return t.abrupt("return");case 3:return r=(Date.now().toString(36)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)).substring(0,27),o=Hn({apiKey:e,endpoint:ir}),t.next=7,o;case 7:return i=t.sent,t.next=10,i.get({linkedId:r});case 10:a=t.sent,u=a.requestId,function(t){var e={value:t,expiry:(new Date).getTime()+864e5};localStorage.setItem("fp",JSON.stringify(e))}(ar(r,u)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),n.g.FB_DEBUG&&console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()(r).catch((function(){return null})):console.warn("Fingerprint is a client side only capability and will not work when running in the server"),t(Qn(i,{beforeRequest:sr}))):t(Object.assign({},i))}}),(function(t){return function(e){var n=b(e,["autoRefresh"]),r=function(){var t=[];return{clearAllTimers:function(){for(;t.length;)clearTimeout(t.pop())},setTimer:function(e,n){t.push(setTimeout(e,n))}}}(),o=r.clearAllTimers,i=r.setTimer,a=t(Qn(n,{afterRequest:function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e,n){var r,u,s,c,l;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yn(n);case 2:r=t.sent,u=r.refreshJwt,s=r.sessionJwt,401===(null==n?void 0:n.status)?o():s&&(c=((l=function(t){var e=t.split(".");try{if(3===e.length){var n=JSON.parse(window.atob(e[1]));if(n.exp)return new Date(1e3*n.exp)}}catch(t){}return null}(s))?l.getTime()-(new Date).getTime():0)-2e4,o(),i((function(){return a.refresh(u)}),c));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}));return Nn(a,["logout","logoutAll"],(function(t){return(0,d.Z)((0,v.Z)().mark((function e(){var n,r=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(void 0,r);case 2:return n=e.sent,e.abrupt("return",(o(),n));case 4:case"end":return e.stop()}}),e)})))}))}}),(function(t){return function(e){return t(Object.assign(Object.assign({},e),{baseHeaders:Object.assign({"x-descope-sdk-name":"web-js","x-descope-sdk-version":"1.0.8"},e.baseHeaders)}))}}),(function(t){return function(e){var n=vr(),r=vr(),o=t(Qn(e,{afterRequest:function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e,o){var i,a,u;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==(null==o?void 0:o.status)){t.next=4;break}n.pub(null),r.pub(null),t.next=13;break;case 4:return t.next=6,Xn(o);case 6:return(i=t.sent)&&r.pub(i),t.next=10,Yn(o);case 10:a=t.sent,(u=a.sessionJwt)&&n.pub(u);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),i=Nn(o,["logout","logoutAll"],(function(t){return(0,d.Z)((0,v.Z)().mark((function e(){var o,i=arguments;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(void 0,i);case 2:return o=e.sent,e.abrupt("return",(n.pub(null),r.pub(null),o));case 4:case"end":return e.stop()}}),e)})))}));return Object.assign(i,{onSessionTokenChange:n.sub,onUserChange:r.sub})}}),(function(t){return function(e){var n=t(Qn(e,{afterRequest:function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e,n){var r,o,i,a;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xn(n);case 2:o=t.sent,i=null===(r=null==o?void 0:o.loginIds)||void 0===r?void 0:r[0],a=null==o?void 0:o.name,i&&(function(t){er(cr,t)}(i),function(t){er(lr,t)}(a));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),r=Nn(n,["flow.start"],pr);return r=Nn(r,["logout","logoutAll"],hr),Object.assign(r,{getLastUserLoginId:dr,getLastUserDisplayName:fr})}}),(function(t){return function(e){var n=e.persistTokens,r=e.sessionTokenViaCookie,o=b(e,["persistTokens","sessionTokenViaCookie"]);if(!n||!or)return n&&console.warn("Storing auth tokens in local storage and cookies are a client side only capabilities and will not be done when running in the server"),t(o);var i=t(Qn(o,{beforeRequest:xr,afterRequest:function(){var t=(0,d.Z)((0,v.Z)().mark((function t(e,n){return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==(null==n?void 0:n.status)){t.next=4;break}kr(),t.next=10;break;case 4:return t.t0=wr,t.next=7,Yn(n);case 7:t.t1=t.sent,t.t2=r,(0,t.t0)(t.t1,t.t2);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),a=Nn(i,["logout","logoutAll"],Ir);return Object.assign(a,{getRefreshToken:mr,getSessionToken:yr})}}))((function(){var t=Kn.apply(void 0,arguments);return Object.assign(Object.assign({},t),{flow:Io(t),webauthn:xo(t)})})),Oo=document.createElement("template");Oo.innerHTML='\n\t<style>\n\t\t:host {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t\t\n\t\t#wc-root {\n\t\t\theight: 100%;\n\t\t\ttransition: opacity 300ms ease-in-out;\n\t\t}\n\n\t\t#wc-root[data-theme] {\n\t\t\tbackground-color: transparent;\n\t\t}\n\n\t\t.fade-out {\n\t\t\topacity: 0.1;\n\t\t}\n\n\t</style>\n\t<div id="wc-root"></div>\n\t';var jo=function(t){(0,a.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,f.Z)(this,n),r=e.call(this),Mr.add((0,i.Z)(r)),Lr.set((0,i.Z)(r),!1),Dr.set((0,i.Z)(r),new Y),Nr.set((0,i.Z)(r),new Y),r.nextRequestStatus=new Y({isLoading:!1}),Kr.set((0,i.Z)(r),void 0),Jr.set((0,i.Z)(r),{popstate:m((0,i.Z)(r),Mr,"m",Vr).bind((0,i.Z)(r))}),Fr.set((0,i.Z)(r),void 0),Qr.set((0,i.Z)(r),z((function(){return w((0,i.Z)(r),void 0,void 0,(0,v.Z)().mark((function t(){var e,n,r,o;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=D(this.projectId,"config.json"),t.prev=1,t.next=4,L(e,"json");case 4:return n=t.sent,r=n.body,o=n.headers,t.abrupt("return",{projectConfig:r,executionContext:{geo:o["x-geo"]}});case 10:t.prev=10,t.t0=t.catch(1),this.logger.error("Cannot get config file","make sure that your projectId & flowId are correct");case 13:return t.abrupt("return",{});case 14:case"end":return t.stop()}}),t,this,[[1,10]])})))}))),r.logger={error:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.error(t,e,new Error),m((0,i.Z)(r),Mr,"m",oo).call((0,i.Z)(r),t,e)},info:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t,e)}},y((0,i.Z)(r),Fr,t,"f"),m((0,i.Z)(r),Mr,"m",Wr).call((0,i.Z)(r)),r}return(0,p.Z)(n,[{key:"projectId",get:function(){return this.getAttribute("project-id")}},{key:"flowId",get:function(){return this.getAttribute("flow-id")}},{key:"baseUrl",get:function(){return this.getAttribute("base-url")||void 0}},{key:"tenant",get:function(){return this.getAttribute("tenant")||void 0}},{key:"redirectUrl",get:function(){return this.getAttribute("redirect-url")||void 0}},{key:"debug",get:function(){return"true"===this.getAttribute("debug")}},{key:"theme",get:function(){var t,e,n=this.getAttribute("theme");return"os"===n?window.matchMedia&&(null===(e=null===(t=window.matchMedia)||void 0===t?void 0:t.call(window,"(prefers-color-scheme: dark)"))||void 0===e?void 0:e.matches)?"dark":"light":n||"light"}},{key:"telemetryKey",get:function(){return this.getAttribute("telemetryKey")||void 0}},{key:"autoFocus",get:function(){var t,e=null!==(t=this.getAttribute("auto-focus"))&&void 0!==t?t:"true";return"skipFirstScreen"===e?e:"true"===e}},{key:"getExecutionContext",value:function(){return w(this,void 0,void 0,(0,v.Z)().mark((function t(){var e,n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(this,Qr,"f").call(this);case 2:return e=t.sent,n=e.executionContext,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getFlowConfig",value:function(){var t;return w(this,void 0,void 0,(0,v.Z)().mark((function e(){var n,r;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(this,Qr,"f").call(this);case 2:return n=e.sent,r=n.projectConfig,e.abrupt("return",(null===(t=null==r?void 0:r.flows)||void 0===t?void 0:t[this.flowId])||{});case 5:case"end":return e.stop()}}),e,this)})))}},{key:"connectedCallback",value:function(){return w(this,void 0,void 0,(0,v.Z)().mark((function t(){var e,n,r,o,i,a;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.shadowRoot.isConnected){t.next=6;break}if(!m(this,Mr,"m",Hr).call(this)){t.next=3;break}return t.abrupt("return",void m(this,Mr,"m",$r).call(this));case 3:m(this,Mr,"m",Br).call(this),m(this,Mr,"m",Xr).call(this),m(this,Mr,"m",Yr).call(this),m(this,Mr,"m",io).call(this),e=V(),n=e.executionId,r=e.stepId,o=e.token,i=e.code,a=e.exchangeError,window.addEventListener("popstate",m(this,Jr,"f").popstate),m(this,Dr,"f").subscribe(m(this,Mr,"m",Gr).bind(this)),m(this,Nr,"f").subscribe(m(this,Mr,"m",ro).bind(this)),m(this,Dr,"f").update({projectId:this.projectId,flowId:this.flowId,baseUrl:this.baseUrl,tenant:this.tenant,redirectUrl:this.redirectUrl,stepId:r,executionId:n,token:o,code:i,exchangeError:a,telemetryKey:this.telemetryKey}),m(this,Nr,"f").update({isDebug:this.debug}),y(this,Lr,!0,"f");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"disconnectedCallback",value:function(){m(this,Dr,"f").unsubscribeAll(),m(this,Nr,"f").unsubscribeAll(),m(this,Mr,"m",no).call(this),window.removeEventListener("popstate",m(this,Jr,"f").popstate)}},{key:"attributeChangedCallback",value:function(t,e,r){if(this.shadowRoot.isConnected&&m(this,Lr,"f")&&e!==r&&n.observedAttributes.includes(t)){m(this,Mr,"m",Br).call(this);var o=null===e;m(this,Dr,"f").update((function(e){var n,i=e.stepId,a=e.executionId;return o||(a=null,i=null,J()),n={},(0,c.Z)(n,B(t),r),(0,c.Z)(n,"stepId",i),(0,c.Z)(n,"executionId",a),n})),m(this,Nr,"f").update({isDebug:this.debug})}}}],[{key:"observedAttributes",get:function(){return["project-id","flow-id","base-url","tenant","theme","debug","telemetryKey","redirect-url","auto-focus"]}}]),n}((0,s.Z)(HTMLElement));Lr=new WeakMap,Dr=new WeakMap,Nr=new WeakMap,Kr=new WeakMap,Jr=new WeakMap,Fr=new WeakMap,Qr=new WeakMap,Mr=new WeakSet,Wr=function(){this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Oo.content.cloneNode(!0)),this.rootElement=this.shadowRoot.querySelector("#wc-root")},Hr=function(){var t=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);return!this.shadowRoot.host.closest("form")&&t},$r=function(){var t=this.shadowRoot.host,e=document.createElement("form");t.parentElement.appendChild(e),e.appendChild(t)},Br=function(){var t=this,e=["base-url","tenant","theme","debug","telemetryKey","redirect-url","auto-focus"];if(jo.observedAttributes.forEach((function(n){if(!e.includes(n)&&!t[B(n)])throw Error("".concat(n," cannot be empty"))})),this.theme&&"light"!==this.theme&&"dark"!==this.theme)throw Error('Supported theme values are "light", "dark", or leave empty for using the OS theme')},Vr=function(){var t=K(),e=t.stepId,n=t.executionId;m(this,Dr,"f").update({stepId:e,executionId:n})},zr=function(t,e,n){var r=this,o=n||void 0,i=!!o;this.sdk=Zo(Object.assign(Object.assign({persistTokens:!0},jo.sdkConfigOverrides),{projectId:t,baseUrl:e,fpKey:o,fpLoad:i})),["start","next"].forEach((function(t){var e=r.sdk.flow[t];r.sdk.flow[t]=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return w(r,void 0,void 0,(0,v.Z)().mark((function t(){return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.nextRequestStatus.update({isLoading:!0}),t.prev=1,t.next=4,e.apply(void 0,n);case 4:return t.abrupt("return",t.sent);case 5:return t.prev=5,this.nextRequestStatus.update({isLoading:!1}),t.finish(5);case 8:case"end":return t.stop()}}),t,this,[[1,,5,8]])})))}}))},Gr=function(t,e,n){return w(this,void 0,void 0,(0,v.Z)().mark((function e(){var r,o,i;return(0,v.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectId,o=t.baseUrl,i=t.telemetryKey,!(n("projectId")||n("baseUrl")||n("telemetryKey"))){e.next=5;break}if(r){e.next=4;break}return e.abrupt("return");case 4:m(this,Mr,"m",zr).call(this,r,o,i);case 5:m(this,Fr,"f").call(this,t);case 6:case"end":return e.stop()}}),e,this)})))},Yr=function(){var t,e,n,r;return w(this,void 0,void 0,(0,v.Z)().mark((function o(){var i,a;return(0,v.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,m(this,Qr,"f").call(this);case 2:i=o.sent,a=i.projectConfig,null===(r=null===(n=null===(e=null===(t=null==a?void 0:a.cssTemplate)||void 0===t?void 0:t[this.theme])||void 0===e?void 0:e.typography)||void 0===n?void 0:n.fontFamilies)||void 0===r||r.forEach((function(t){return function(t){if(t){var e=document.createElement("link");e.href=t,e.rel="stylesheet",document.head.appendChild(e)}}(t.url)}));case 5:case"end":return o.stop()}}),o,this)})))},Xr=function(){m(this,Mr,"m",to).call(this),m(this,Mr,"m",eo).call(this)},to=function(){return w(this,void 0,void 0,(0,v.Z)().mark((function t(){var e,n,r,o;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.createElement("style"),n=D(this.projectId,"theme.css"),t.prev=1,t.next=4,L(n,"text");case 4:r=t.sent,o=r.body,e.innerText=o,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),this.logger.error("Cannot fetch theme file","make sure that your projectId & flowId are correct");case 12:this.shadowRoot.appendChild(e);case 13:case"end":return t.stop()}}),t,this,[[1,9]])})))},eo=function(){this.rootElement.setAttribute("data-theme",this.theme)},no=function(){var t;null===(t=m(this,Kr,"f"))||void 0===t||t.remove(),y(this,Kr,null,"f")},ro=function(t){var e=t.isDebug;return w(this,void 0,void 0,(0,v.Z)().mark((function t(){return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=8;break}return t.next=3,n.e(229).then(n.bind(n,6229));case 3:y(this,Kr,document.createElement("descope-debugger"),"f"),Object.assign(m(this,Kr,"f").style,{position:"fixed",top:"0",right:"0",height:"100vh",width:"100vw",pointerEvents:"none",zIndex:99999}),document.body.appendChild(m(this,Kr,"f")),t.next=9;break;case 8:m(this,Mr,"m",no).call(this);case 9:case"end":return t.stop()}}),t,this)})))},oo=function(t,e){var n;t&&this.debug&&(null===(n=m(this,Kr,"f"))||void 0===n||n.updateData({title:t,description:e}))},io=function(){var t=this;this.rootElement.onkeydown=function(e){if("Enter"===e.key){e.preventDefault();var n=t.rootElement.querySelectorAll("button");if(1!==n.length){var r=Array.from(n).filter((function(t){return"button"===t.getAttribute("data-type")}));1===r.length&&r[0].click()}else n[0].click()}}},jo.sdkConfigOverrides={baseHeaders:{"x-descope-sdk-name":"web-component","x-descope-sdk-version":"2.0.14"}};var So=function(t){(0,a.Z)(n,t);var e=(0,u.Z)(n);function n(){var t;(0,f.Z)(this,n);var r=new Y;return t=e.call(this,r.update.bind(r)),ao.add((0,i.Z)(t)),t.stepState=new Y({},{updateOnlyOnChange:!1}),uo.set((0,i.Z)(t),void 0),so.set((0,i.Z)(t),null),co.set((0,i.Z)(t),(function(){clearInterval(m((0,i.Z)(t),uo,"f")),y((0,i.Z)(t),uo,null,"f")})),lo.set((0,i.Z)(t),(function(e){var n,r,o,a,u,s,c,l,d;if(null==e?void 0:e.ok){var f=null===(l=null===(c=null===(s=e.data)||void 0===s?void 0:s.screen)||void 0===c?void 0:c.state)||void 0===l?void 0:l.errorText;f&&t.logger.error(f),(null===(d=e.data)||void 0===d?void 0:d.error)&&t.logger.error("[".concat(e.data.error.code,"]: ").concat(e.data.error.description),e.data.error.message);var p=e.data,h=p.status,v=p.authInfo,g=p.lastAuth;if("completed"===h)return function(t){(null==t?void 0:t.authMethod)&&O&&localStorage.setItem(C,JSON.stringify(t))}(g),m((0,i.Z)(t),co,"f").call((0,i.Z)(t)),void m((0,i.Z)(t),ao,"m",ko).call((0,i.Z)(t),"success",v);var b=e.data,w=b.executionId,y=b.stepId,k=b.action,x=b.screen,I=b.redirect,Z=b.webauthn;k!==_?t.flowState.update({stepId:y,executionId:w,action:k,redirectTo:null==I?void 0:I.url,screenId:null==x?void 0:x.id,screenState:null==x?void 0:x.state,webauthnTransactionId:null==Z?void 0:Z.transactionId,webauthnOptions:null==Z?void 0:Z.options}):t.flowState.update({action:k})}else{m((0,i.Z)(t),co,"f").call((0,i.Z)(t)),m((0,i.Z)(t),ao,"m",ko).call((0,i.Z)(t),"error",null==e?void 0:e.error);var j=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.url,S="".concat(null===(r=null==e?void 0:e.response)||void 0===r?void 0:r.status," - ").concat(null===(o=null==e?void 0:e.response)||void 0===o?void 0:o.statusText);t.logger.error((null===(a=null==e?void 0:e.error)||void 0===a?void 0:a.errorDescription)||j,(null===(u=null==e?void 0:e.error)||void 0===u?void 0:u.errorMessage)||S)}})),fo.set((0,i.Z)(t),z((function(){return w((0,i.Z)(t),void 0,void 0,(0,v.Z)().mark((function t(){var e,n;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.sdk.webauthn.signIn.start("",window.location.origin);case 3:return n=t.sent,t.abrupt("return",(n.ok||this.logger.error("Webauthn start failed",null===(e=null==n?void 0:n.error)||void 0===e?void 0:e.errorMessage),n.data));case 7:t.prev=7,t.t0=t.catch(0),this.logger.error("Webauthn start failed",t.t0.message);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}))),t.flowState=r,t}return(0,p.Z)(n,[{key:"connectedCallback",value:function(){var t,e,i=this,a=Object.create(null,{connectedCallback:{get:function(){return o((0,r.Z)(n.prototype),"connectedCallback",i)}}});return w(this,void 0,void 0,(0,v.Z)().mark((function n(){return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.shadowRoot.isConnected&&(null===(t=this.flowState)||void 0===t||t.subscribe(this.onFlowChange.bind(this)),null===(e=this.stepState)||void 0===e||e.subscribe(this.onStepChange.bind(this))),n.next=3,a.connectedCallback.call(this);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"disconnectedCallback",value:function(){o((0,r.Z)(n.prototype),"disconnectedCallback",this).call(this),this.flowState.unsubscribeAll(),this.stepState.unsubscribeAll()}},{key:"onFlowChange",value:function(t,e,n){var r,o;return w(this,void 0,void 0,(0,v.Z)().mark((function i(){var a,u,s,c,l,d,f,p,h,g,b,k,x,I,Z,O,j,S,E,A,U,q,M,L,K,J,F,W,H,$=this;return(0,v.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=t.projectId,u=t.flowId,s=t.tenant,c=t.stepId,l=t.executionId,d=t.action,f=t.screenId,p=t.screenState,h=t.redirectTo,g=t.redirectUrl,b=t.token,k=t.code,x=t.exchangeError,I=t.webauthnTransactionId,Z=t.webauthnOptions,m(this,uo,"f")&&m(this,co,"f").call(this),S=this.sdk.getLastUserLoginId(),l){i.next=15;break}if(u){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,this.getFlowConfig();case 8:if(U=i.sent,E=function(t,e){var n,r=null===(n=et[null==t?void 0:t.key])||void 0===n?void 0:n[t.operator];if(!r)return{};var o=r(e)?t.met:t.unmet;return{startScreenId:null==o?void 0:o.screenId,conditionInteractionId:null==o?void 0:o.interactionId}}(U.condition,{loginId:S,code:k}),A=E.startScreenId,O=void 0===A?U.startScreenId:A,j=E.conditionInteractionId,O){i.next=15;break}return q=k?{exchangeCode:k,idpInitiated:!0}:void 0,i.next=13,this.sdk.flow.start(u,Object.assign({tenant:s},g&&{redirectUrl:g}),j,"",q);case 13:return M=i.sent,i.abrupt("return",(m(this,lo,"f").call(this,M),void("completed"!==(null===(r=null==M?void 0:M.data)||void 0===r?void 0:r.status)&&this.flowState.update({code:void 0}))));case 15:if(!l||!(n("token")&&b||n("code")&&k||n("exchangeError")&&x)){i.next=20;break}return i.next=18,this.sdk.flow.next(l,c,R,{token:b,exchangeCode:k,exchangeError:x});case 18:return L=i.sent,i.abrupt("return",(m(this,lo,"f").call(this,L),void this.flowState.update({token:void 0,code:void 0,exchangeError:void 0})));case 20:if("redirect"!==d){i.next=22;break}return i.abrupt("return",(h||this.logger.error("Did not get redirect url"),void window.location.assign(h)));case 22:if(d!==P&&"webauthnGet"!==d){i.next=48;break}if(I&&Z){i.next=25;break}return i.abrupt("return",void this.logger.error("Did not get webauthn transaction id or options"));case 25:if(null===(o=m(this,so,"f"))||void 0===o||o.abort(),y(this,so,null,"f"),i.prev=26,d!==P){i.next=33;break}return i.next=30,this.sdk.webauthn.helpers.create(Z);case 30:i.t0=i.sent,i.next=36;break;case 33:return i.next=35,this.sdk.webauthn.helpers.get(Z);case 35:i.t0=i.sent;case 36:K=i.t0,i.next=44;break;case 39:if(i.prev=39,i.t1=i.catch(26),"NotAllowedError"===i.t1.name){i.next=43;break}return i.abrupt("return",void this.logger.error(i.t1.message));case 43:J=!0;case 44:return i.next=46,this.sdk.flow.next(l,c,R,{transactionId:I,response:K,cancelWebauthn:J});case 46:F=i.sent,m(this,lo,"f").call(this,F);case 48:if(d===_&&y(this,uo,setInterval((function(){return w($,void 0,void 0,(0,v.Z)().mark((function t(){var e;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.flow.next(l,c,T,{});case 2:e=t.sent,m(this,lo,"f").call(this,e);case 4:case"end":return t.stop()}}),t,this)})))}),2e3),"f"),f||O){i.next=50;break}return i.abrupt("return",void this.logger.info("Refreshing the page during a flow is not supported yet"));case 50:W={direction:N(+c,+e.stepId),screenState:Object.assign(Object.assign({},p),{lastAuth:{loginId:S,name:this.sdk.getLastUserDisplayName()||S}}),htmlUrl:D(a,"".concat(O||f,".html"))},H=function(t){var e={};if(t)try{Object.assign(e,JSON.parse(localStorage.getItem(C)))}catch(t){}return e}(S),O?W.next=function(t,e){return $.sdk.flow.start(u,Object.assign({tenant:s,lastAuth:H},g&&{redirectUrl:g}),j,t,Object.assign(Object.assign({},e),k&&{exchangeCode:k,idpInitiated:!0}))}:(n("projectId")||n("baseUrl")||n("executionId")||n("stepId"))&&(W.next=function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=$.sdk.flow).next.apply(t,[l,c].concat(n))}),this.stepState.update(W);case 52:case"end":return i.stop()}}),i,this,[[26,39]])})))}},{key:"onStepChange",value:function(t,e){var n;return w(this,void 0,void 0,(0,v.Z)().mark((function r(){var o,i,a,u,s,c,l,d,f,p,h=this;return(0,v.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=t.htmlUrl,i=t.direction,a=t.next,u=t.screenState,s=document.createElement("template"),r.next=7,L(o,"text");case 7:return c=r.sent,l=c.body,s.innerHTML=l,d=s.content.cloneNode(!0),r.t0=function(t,e){var n,r=Array.from(t.querySelectorAll("script[data-id]")).map((function(n){var r,o=n.getAttribute("data-id"),i=null===(r=t.getElementById(o))||void 0===r?void 0:r.innerHTML,a=Function(i).bind(n.previousSibling,e);return n.remove(),a}));return null===(n=t.querySelector("scripts"))||void 0===n||n.remove(),r},r.t1=d,r.next=15,this.getExecutionContext();case 15:if(r.t2=r.sent,f=(0,r.t0)(r.t1,r.t2),!this.sdk.webauthn.helpers.isSupported()){r.next=22;break}return r.next=20,m(this,ao,"m",ho).call(this,d,a);case 20:r.next=23;break;case 22:d.querySelectorAll("button[".concat(U,'="biometrics"]')).forEach((function(t){return t.setAttribute("disabled","true")}));case 23:X(d,u),function(t,e){var n;e&&(null===(n=null==t?void 0:t.style)||void 0===n||n.setProperty("--totp-image","url(data:image/jpg;base64,".concat(e,")")))}(d.querySelector("div"),null===(n=null==u?void 0:u.totp)||void 0===n?void 0:n.image),p=function(){return w(h,void 0,void 0,(0,v.Z)().mark((function t(){var n,r;return(0,v.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{f.forEach((function(t){t()}))}catch(n){this.logger.error(n.message)}if(this.rootElement.replaceChildren(d),n=!e.htmlUrl,function(t,e,n){if(!0===e||"skipFirstScreen"===e&&!n){var r=t.querySelector('input:not([aria-hidden="true"])');null==r||r.focus()}}(this.rootElement,this.autoFocus,n),m(this,ao,"m",mo).call(this,a),m(this,ao,"m",ko).call(this,"page-updated",{}),!this.rootElement.querySelector("[".concat(U,'="polling"]'))){t.next=9;break}return t.next=7,a(T,{});case 7:r=t.sent,m(this,lo,"f").call(this,r);case 9:case"end":return t.stop()}}),t,this)})))},i?m(this,ao,"m",yo).call(this,p,i):p();case 27:case"end":return r.stop()}}),r,this)})))}}],[{key:"sdkConfigOverrides",set:function(t){jo.sdkConfigOverrides=t}}]),n}(jo);uo=new WeakMap,so=new WeakMap,co=new WeakMap,lo=new WeakMap,fo=new WeakMap,ao=new WeakSet,po=function(t){var e=t.name;if(!["email"].includes(e)){var n="user-".concat(e);t.name=n,t.addEventListener("input",(function(){t.name=t.value?e:n}))}},ho=function(t,e){var n;return w(this,void 0,void 0,(0,v.Z)().mark((function r(){var o,i,a,u,s=this;return(0,v.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(n=m(this,so,"f"))||void 0===n||n.abort(),o=t.querySelector('input[autocomplete="webauthn"]'),r.t0=o,!r.t0){r.next=7;break}return r.next=6,tt();case 6:r.t0=r.sent;case 7:if(!r.t0){r.next=17;break}return r.next=10,m(this,fo,"f").call(this);case 10:if(r.t1=r.sent,r.t1){r.next=13;break}r.t1={};case 13:i=r.t1,a=i.options,u=i.transactionId,a&&u&&(m(this,ao,"m",po).call(this,o),y(this,so,new AbortController,"f"),this.sdk.webauthn.helpers.conditional(a,m(this,so,"f")).then((function(t){return w(s,void 0,void 0,(0,v.Z)().mark((function n(){var r;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(o.id,{transactionId:u,response:t});case 2:r=n.sent,m(this,lo,"f").call(this,r);case 4:case"end":return n.stop()}}),n,this)})))})).catch((function(t){"AbortError"!==t.name&&s.logger.error("Conditional login failed",t.message)})));case 17:case"end":return r.stop()}}),r,this)})))},vo=function(){return Array.from(this.shadowRoot.querySelectorAll(".descope-input")).every((function(t){return t.reportValidity(),t.checkValidity()}))},go=function(){return Array.from(this.shadowRoot.querySelectorAll("*[name]:not([".concat(A,"])"))).reduce((function(t,e){return e.name?Object.assign(t,(0,c.Z)({},e.name,e.value)):t}),{})},bo=function(t){var e=this,n=this.nextRequestStatus.subscribe((function(r){var o,i;r.isLoading?null===(o=null==t?void 0:t.classList)||void 0===o||o.add("loading"):(e.nextRequestStatus.unsubscribe(n),null===(i=null==t?void 0:t.classList)||void 0===i||i.remove("loading"))}))},wo=function(t,e){return w(this,void 0,void 0,(0,v.Z)().mark((function n(){var r,o,i,a,u,s;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.formNoValidate&&!m(this,ao,"m",vo).call(this)){n.next=10;break}return r=null==t?void 0:t.getAttribute("id"),m(this,ao,"m",bo).call(this,t),o=m(this,ao,"m",go).call(this),s=t,i=Array.from((null==s?void 0:s.attributes)||[]).reduce((function(t,e){var n,r=null===(n=new RegExp("^data-descope-(\\S+)$").exec(e.name))||void 0===n?void 0:n[1];return r?Object.assign(t,(0,c.Z)({},r,e.value)):t}),{}),a=Object.assign(Object.assign(Object.assign({},i),o),{origin:window.location.origin}),n.next=8,e(r,a);case 8:u=n.sent,m(this,lo,"f").call(this,u);case 10:case"end":return n.stop()}}),n,this)})))},mo=function(t){var e=this;this.rootElement.querySelectorAll("button").forEach((function(n){n.onclick=function(){m(e,ao,"m",wo).call(e,n,t)}}))},yo=function(t,e){var n=this;this.rootElement.addEventListener("transitionend",(function(){n.rootElement.classList.remove("fade-out"),t()}),{once:!0});var r=e===k.forward?"slide-forward":"slide-backward";Array.from(this.rootElement.getElementsByClassName("input-container")).forEach((function(t,e){t.style["transition-delay"]=40*e+"ms",t.classList.add(r)})),this.rootElement.classList.add("fade-out")},ko=function(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))},customElements.define("descope-wc",So)},8669:function(t,e,n){n.r(e),n.d(e,{default:function(){return r.D}});var r=n(1086)}}]);
//# sourceMappingURL=669.f81839b0.chunk.js.map